(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{12:function(e,t,n){},4:function(e,t,n){e.exports=n(5)},5:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),s=(n(2),n(8),n(12),n(1)),c=n.n(s),r="https://cors-anywhere.herokuapp.com/";function i(e,t,n,a){var s=this,c="";for(var r in n){c+='<input id="in'+(h=r-0+1)+e+'" type = "text" class = "ctr_inp">'}document.getElementById("root").innerHTML="<div class = 'mem' ><input id=\"back"+e+'" type = "submit" value="\u041d\u0430\u0437\u0430\u0434" class = "ctr_inp">'+c+'<canvas id="cvs'+e+'" class = "cvs"></canvas>\n    <input id="dvl'+e+'" type = "submit" value="\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c" class = "ctr_inp"></div> "';var i=document.getElementById("cvs"+e),p=i.getContext("2d"),m=new Image;m.src=t,m.onload=function(){for(var e in i.height=m.height,i.width=m.width,p.drawImage(m,0,0),n)p.font="bold  50px Verdana",p.fillStyle=a,p.textAlign="center",p.fillText(n[e].text,n[e].x,n[e].y)},this.write=function(e){for(var t in p.clearRect(0,0,i.width,i.height),p.drawImage(m,0,0),n){var o=e[t].value,s=o.length;if(s<=n[t].max_size)p.font="bold  50px Verdana",p.fillStyle=a,p.textAlign="center",p.fillText(e[t].value,n[t].x,n[t].y);else for(var c=s/n[t].max_size,r=o.split(" "),l=r.length,d=0,u=0;u<c;u++){for(var h="",x=0;x<l/c;x++)void 0!=r[d]&&(h+=r[d]+" "),d++;p.font="bold  50px Verdana",p.fillStyle=a,p.textAlign="center",p.fillText(h,n[t].x,n[t].y+40*u)}}};var u=[];for(var r in n){var h=r-0+1;u[r]=document.getElementById("in"+h+e),u[r].value=n[r].text,u[r].oninput=function(){s.write(u)}}document.getElementById("dvl"+e).onclick=function(){return o.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.awrap(d(7245851,i.toDataURL()));case 2:case"end":return e.stop()}}))},document.getElementById("back"+e).onclick=function(){l()}}function p(e,t,n,a){var o;(o=new Image).src=t,o.className="mem_img",o.id="mem_img"+e,document.getElementById("root").append(o),(o=document.getElementById("mem_img"+e)).onclick=function(){new i(e,t,n,a)}}function l(){document.getElementById("root").innerHTML="",new p(1,"mem1.jpg",[{text:"No",x:700,y:100,max_size:7},{text:"Yes",x:700,y:600,max_size:7}],"#000000"),new p(2,"mem5.jpg",[{text:"Oyhh",x:350,y:350,max_size:20}],"#FFFFFF"),new p(3,"mem6.jpg",[{text:"Lapotaa",x:350,y:350,max_size:20}],"#FFFFFF")}function d(e,t){var n,a,s,i,p,l,d,m,u,h,x,v;return o.a.async((function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,o.a.awrap(c.a.send("VKWebAppGetAuthToken",{app_id:e,scope:"photos"}));case 2:return n=f.sent,f.next=5,o.a.awrap(c.a.send("VKWebAppCallAPIMethod",{method:"photos.getWallUploadServer",params:{access_token:n.data.access_token,v:"5.95"}}));case 5:return a=f.sent,s=a.data.response.upload_url,i=new FormData,f.t0=i,f.next=11,o.a.awrap(fetch(t,"story.png","image/png"));case 11:return f.t1=f.sent,f.t0.append.call(f.t0,"photo",f.t1),f.next=15,o.a.awrap(fetch(r+s,{method:"POST",body:i}).then((function(e){return e.json()})));case 15:return p=f.sent,l=p.server,d=p.photo,m=p.hash,f.next=21,o.a.awrap(c.a.send("VKWebAppCallAPIMethod",{method:"photos.saveWallPhoto",params:{access_token:n.data.access_token,server:l,photo:d,hash:m,v:"5.95"}}));case 21:return u=f.sent,h=u.data.response[0],x=h.id,v=h.owner_id,f.next=25,o.a.awrap(c.a.send("VKWebAppShowWallPostBox",{message:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043d\u0430 \u0441\u0442\u0435\u043d\u0443 \u0441 \u0444\u043e\u0442\u043e",attachments:"photo".concat(v,"_").concat(x,",https://vk.com/app7014374")}));case 25:case"end":return f.stop()}}))}c.a.subscribe((function(e){var t=e.detail,n=t.type,a=t.data;console.log("\u0442\u0438\u043f: "+n),console.log(10),"VKWebAppAccessTokenReceived"==n&&a.access_token,"VKWebAppCallAPIMethodFailed"==n&&console.log(a.error_data),console.log(a)})),c.a.send("VKWebAppInit",{}),l(),c.a.send("VKWebAppGetAuthToken",{app_id:7245851,scope:"friends,photos"})}},[[4,1,2]]]);
//# sourceMappingURL=main.a7fa204b.chunk.js.map