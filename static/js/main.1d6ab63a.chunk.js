(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{18:function(e,t,n){},5:function(e,t,n){e.exports=n(6)},6:function(e,t,n){"use strict";n.r(t);var a,o,r=n(0),c=n.n(r),i=(n(2),n(9),n(4)),s=n.n(i),l=(n(18),n(1)),p=n.n(l),u="https://cors-anywhere.herokuapp.com/";function d(e,t,n,r){var i=this,s="";for(var l in n){s+='<input id="in'+(v=l-0+1)+e+'" type = "text" class = "ctr_inp">'}document.getElementById("root").innerHTML="<div class = 'mem' ><input id=\"back"+e+'" type = "submit" value="\u041d\u0430\u0437\u0430\u0434" class = "ctr_inp">'+s+'<canvas id="cvs'+e+'" class = "cvs"></canvas>\n    <input id="dvl'+e+'" type = "submit" value="\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c" class = "ctr_inp"></div> "';var u=document.getElementById("cvs"+e),d=u.getContext("2d"),m=new Image;m.src=t,m.onload=function(){for(var e in u.height=m.height,u.width=m.width,d.drawImage(m,0,0),n)d.font="bold  50px Verdana",d.fillStyle=r,d.textAlign="center",d.fillText(n[e].text,n[e].x,n[e].y)},this.write=function(e){for(var t in d.clearRect(0,0,u.width,u.height),d.drawImage(m,0,0),n){var a=e[t].value,o=a.length;if(o<=n[t].max_size)d.font="bold  50px Verdana",d.fillStyle=r,d.textAlign="center",d.fillText(e[t].value,n[t].x,n[t].y);else for(var c=o/n[t].max_size,i=a.split(" "),s=i.length,l=0,p=0;p<c;p++){for(var f="",h=0;h<s/c;h++)void 0!=i[l]&&(f+=i[l]+" "),l++;d.font="bold  50px Verdana",d.fillStyle=r,d.textAlign="center",d.fillText(f,n[t].x,n[t].y+40*p)}}};var h=[];for(var l in n){var v=l-0+1;h[l]=document.getElementById("in"+v+e),h[l].value=n[l].text,h[l].oninput=function(){i.write(h)}}document.getElementById("dvl"+e).onclick=function(){return c.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:o=u,p.a.send("VKWebAppCallAPIMethod",{method:"photos.getWallUploadServer",request_id:"mem",params:{v:"5.103",access_token:a}});case 2:case"end":return e.stop()}}))},document.getElementById("back"+e).onclick=function(){f()}}function m(e,t,n,a){var o;(o=new Image).src=t,o.className="mem_img",o.id="mem_img"+e,document.getElementById("root").append(o),(o=document.getElementById("mem_img"+e)).onclick=function(){new d(e,t,n,a)}}function f(){document.getElementById("root").innerHTML="",new m(1,"mem1.jpg",[{text:"No",x:700,y:100,max_size:7},{text:"Yes",x:700,y:600,max_size:7}],"#000000"),new m(2,"mem5.jpg",[{text:"Oyhh",x:350,y:350,max_size:20}],"#FFFFFF"),new m(3,"mem6.jpg",[{text:"Lapotaa",x:350,y:350,max_size:20}],"#FFFFFF")}p.a.subscribe((function(e){var t,n,r,i,s,l,p;return c.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:if(t=e.detail,n=t.type,r=t.data,console.log("\u0442\u0438\u043f: "+n),console.log(10),"VKWebAppAccessTokenReceived"==n&&(a=r.access_token),"VKWebAppCallAPIMethodFailed"==n&&console.log(r.error_data),"VKWebAppCallAPIMethodResult"!=n){d.next=25;break}if(console.log(1),console.log(r),console.log(1),"mem"!=r.request_id){d.next=25;break}return alert(r.response.upload_url),i=r.response.upload_url,s=o.toDataURL(),l=new FormData,d.t0=l,d.next=17,c.a.awrap(v(s,"story.png","image/png"));case 17:return d.t1=d.sent,d.t0.append.call(d.t0,"photo",d.t1),d.next=21,c.a.awrap(fetch(u+i,{method:"POST",body:l}).then((function(e){e.json(),alert(e)})));case 21:p=d.sent,p.server,p.photo,p.hash;case 25:console.log(r);case 26:case"end":return d.stop()}}))})),p.a.send("VKWebAppInit",{}),f(),p.a.send("VKWebAppGetAuthToken",{app_id:7245851,scope:"friends,photos"});var h=function(e){var t=e.getReader(),n=[];return function e(){return t.read().then((function(t){var a=t.value;return t.done?n:(n.push(a),e())}))}()};function v(e,t,n){return c.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",s()(e).then((function(e){return h(e.body)})).then((function(e){return new File(e,t,{type:n})})));case 1:case"end":return a.stop()}}))}}},[[5,1,2]]]);
//# sourceMappingURL=main.1d6ab63a.chunk.js.map