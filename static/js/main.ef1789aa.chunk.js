(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{19:function(e,t,n){},6:function(e,t,n){e.exports=n(7)},7:function(e,t,n){"use strict";n.r(t);var o,a,s=n(0),l=n.n(s),i=n(4),c=(n(2),n(10),n(5),n(19),n(1)),r=n.n(c),p="https://cors-anywhere.herokuapp.com/";function d(e,t,n,s){var i=this,c="";for(var p in n){c+='<input id="in'+(f=p-0+1)+e+'" type = "text" class = "ctr_inp">'}document.getElementById("root").innerHTML="<div class = 'mem' ><input id=\"back"+e+'" type = "submit" value="\u041d\u0430\u0437\u0430\u0434" class = "ctr_inp">'+c+'<canvas id="cvs'+e+'" class = "cvs"></canvas>\n    <input id="dvl'+e+'" type = "submit" value="\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c" class = "ctr_inp"></div> "';var d=document.getElementById("cvs"+e),m=d.getContext("2d"),g=new Image;g.src=t,g.onload=function(){for(var e in d.height=g.height,d.width=g.width,m.drawImage(g,0,0),n)m.font="bold  50px Verdana",m.fillStyle=s,m.textAlign="center",m.fillText(n[e].text,n[e].x,n[e].y)},this.write=function(e){for(var t in m.clearRect(0,0,d.width,d.height),m.drawImage(g,0,0),n){var o=e[t].value,a=o.length;if(a<=n[t].max_size)m.font="bold  50px Verdana",m.fillStyle=s,m.textAlign="center",m.fillText(e[t].value,n[t].x,n[t].y);else for(var l=a/n[t].max_size,i=o.split(" "),c=i.length,r=0,p=0;p<l;p++){for(var u="",v=0;v<c/l;v++)void 0!=i[r]&&(u+=i[r]+" "),r++;m.font="bold  50px Verdana",m.fillStyle=s,m.textAlign="center",m.fillText(u,n[t].x,n[t].y+40*p)}}};var v=[];for(var p in n){var f=p-0+1;v[p]=document.getElementById("in"+f+e),v[p].value=n[p].text,v[p].oninput=function(){i.write(v)}}document.getElementById("dvl"+e).onclick=function(){return l.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:a=d,r.a.send("VKWebAppCallAPIMethod",{method:"photos.getWallUploadServer",request_id:"mem",params:{v:"5.103",access_token:o}});case 2:case"end":return e.stop()}}))},document.getElementById("back"+e).onclick=function(){u()}}function m(e,t,n,o){var a;(a=new Image).src=t,a.className="mem_img",a.id="mem_img"+e,document.getElementById("root").append(a),(a=document.getElementById("mem_img"+e)).onclick=function(){new d(e,t,n,o)}}function u(){document.getElementById("root").innerHTML="",new m(1,"mem1.jpg",[{text:"No",x:700,y:100,max_size:7},{text:"Yes",x:700,y:600,max_size:7}],"#000000"),new m(2,"mem5.jpg",[{text:"Oyhh",x:350,y:350,max_size:20}],"#FFFFFF"),new m(3,"mem6.jpg",[{text:"Lapotaa",x:350,y:350,max_size:20}],"#FFFFFF")}r.a.subscribe((function(e){var t,n,s,c,d,m,u;return l.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:t=e.detail,n=t.type,s=t.data,console.log("\u0442\u0438\u043f: "+n),console.log(10),"VKWebAppAccessTokenReceived"==n&&(o=s.access_token),"VKWebAppCallAPIMethodFailed"==n&&console.log(s.error_data),"VKWebAppCallAPIMethodResult"==n&&(console.log(1),console.log(s),console.log(1),"mem"==s.request_id&&(alert(s.response.upload_url),c=s.response.upload_url,Object(i.a)("upload_url"),c=c.replace("https//",""),r.a.send(),d=a.toDataURL(),(m=new FormData).append("photo",d),(u=new XMLHttpRequest).open("POST",p+c,!0),u.onload=u.onerror=function(){console.log(u.responseText),alert("sever ansv")},u.send(m))),console.log(s);case 7:case"end":return l.stop()}}))})),r.a.send("VKWebAppInit",{}),u(),r.a.send("VKWebAppGetAuthToken",{app_id:7245851,scope:"friends,photos"})}},[[6,1,2]]]);
//# sourceMappingURL=main.ef1789aa.chunk.js.map