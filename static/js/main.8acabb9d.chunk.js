(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{18:function(e,t,n){},5:function(e,t,n){e.exports=n(6)},6:function(e,t,n){"use strict";n.r(t);var a,o,i=n(0),s=n.n(i),c=(n(2),n(9),n(4),n(18),n(1)),l=n.n(c);function r(e,t,n,i){var c=this,r="";for(var p in n){r+='<input id="in'+(g=p-0+1)+e+'" type = "text" class = "ctr_inp">'}document.getElementById("root").innerHTML="<div class = 'mem' ><input id=\"back"+e+'" type = "submit" value="\u041d\u0430\u0437\u0430\u0434" class = "ctr_inp">'+r+'<canvas id="cvs'+e+'" class = "cvs"></canvas>\n    <input id="dvl'+e+'" type = "submit" value="\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c" class = "ctr_inp"></div> "';var m=document.getElementById("cvs"+e),u=m.getContext("2d"),f=new Image;f.src=t,f.onload=function(){for(var e in m.height=f.height,m.width=f.width,u.drawImage(f,0,0),n)u.font="bold  50px Verdana",u.fillStyle=i,u.textAlign="center",u.fillText(n[e].text,n[e].x,n[e].y)},this.write=function(e){for(var t in u.clearRect(0,0,m.width,m.height),u.drawImage(f,0,0),n){var a=e[t].value,o=a.length;if(o<=n[t].max_size)u.font="bold  50px Verdana",u.fillStyle=i,u.textAlign="center",u.fillText(e[t].value,n[t].x,n[t].y);else for(var s=o/n[t].max_size,c=a.split(" "),l=c.length,r=0,p=0;p<s;p++){for(var d="",x=0;x<l/s;x++)void 0!=c[r]&&(d+=c[r]+" "),r++;u.font="bold  50px Verdana",u.fillStyle=i,u.textAlign="center",u.fillText(d,n[t].x,n[t].y+40*p)}}};var x=[];for(var p in n){var g=p-0+1;x[p]=document.getElementById("in"+g+e),x[p].value=n[p].text,x[p].oninput=function(){c.write(x)}}document.getElementById("dvl"+e).onclick=function(){return s.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:o=m,l.a.send("VKWebAppCallAPIMethod",{method:"photos.getWallUploadServer",request_id:"mem",params:{v:"5.103",access_token:a}});case 2:case"end":return e.stop()}}))},document.getElementById("back"+e).onclick=function(){d()}}function p(e,t,n,a){var o;(o=new Image).src=t,o.className="mem_img",o.id="mem_img"+e,document.getElementById("root").append(o),(o=document.getElementById("mem_img"+e)).onclick=function(){new r(e,t,n,a)}}function d(){document.getElementById("root").innerHTML="",new p(1,"mem1.jpg",[{text:"No",x:700,y:100,max_size:7},{text:"Yes",x:700,y:600,max_size:7}],"#000000"),new p(2,"mem5.jpg",[{text:"Oyhh",x:350,y:350,max_size:20}],"#FFFFFF"),new p(3,"mem6.jpg",[{text:"Lapotaa",x:350,y:350,max_size:20}],"#FFFFFF")}l.a.subscribe((function(e){var t,n,i,c,l,r,p,d,m;return s.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:if(t=e.detail,n=t.type,i=t.data,console.log("\u0442\u0438\u043f: "+n),console.log(10),"VKWebAppAccessTokenReceived"==n&&(a=i.access_token),"VKWebAppCallAPIMethodFailed"==n&&console.log(i.error_data),"VKWebAppCallAPIMethodResult"!=n){u.next=24;break}if(console.log(1),console.log(i),console.log(1),"mem"!=i.request_id){u.next=24;break}return alert(i.response.upload_url),c=i.response.upload_url,l=c.replace("https//",""),alert(l),r=o.toDataURL(),(p=new FormData).append("photo",r),u.next=19,s.a.awrap(fetch(o+l,{method:"POST",body:p}).then((function(e){return e.json()})));case 19:d=u.sent,d.server,m=d.photo,d.hash,alert(m);case 24:console.log(i);case 25:case"end":return u.stop()}}))})),l.a.send("VKWebAppInit",{}),d(),l.a.send("VKWebAppGetAuthToken",{app_id:7245851,scope:"friends,photos"})}},[[5,1,2]]]);
//# sourceMappingURL=main.8acabb9d.chunk.js.map